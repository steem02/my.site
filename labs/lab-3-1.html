<!doctype html>

<html>
<head>
  <title>Структура DOM</title>
  <meta charset="utf-8">
  <script type="text/javascript">
    var win;
    function showDOM() {
      win = window.open('about:blank', 'Hello', 'width=500, height=400, top='+(screen.availHeight/2-200)+', left='+(screen.availWidth/2-250))
      win.document.write('<html><body>');
      showChildNodes(document.body, win.document);
      win.document.write('</body></html>')
    }
    function showChildNodes(node, doc){
      if(node.nodeType == 3){
        doc.write('<li><i>'+node.nodeValue+'</i></li></ul>');
        if(node.nextSibling == null){
          if(node.parentElement.nextSibling != null){
            node = node.parentElement.nextSibling 
          }else{
            while(node.nextSibling == null){
              node = node.parentElement;
            }
            node = node.nextSibling;
          }
        }else{
          node = node.nextSibling;
        }
        showChildNodes(node, doc);
        
      }
      else if(node.nodeType == 1){
        doc.write('<ul><li>'+node.nodeName + '</li>');
        if(node.hasChildNodes() == true){
          node = node.firstChild;
        }else{
          while(node.nextSibling == null){
            node = node.parentElement;
          }
          node = node.nextSibling;
        }
        showChildNodes(node, doc);
      }
    }
    /*
      Создайте и опишите функцию showDOM(), которая открывает новое окно браузера 
        и выводит на экран структуру текущего документа, вызывая
        рекурсивную функцию showChildNodes(node, doc)
      1. Откройте новое окно
      2. Отрисуйте в новом окне открывающие тэги "<html>" и "<body>" (document.write!)
      3. Вызовите вышеописанную функцию showChildNodes(), передав в качестве параметров:
        - корневой элемент документа (document.documentElement) или тело документа (document.body)
        - ссылку на объект Document нового окна
      4. Отрисуйте в новом окне закрывающие тэги "</html>" и "</body>"  
    */
    
    /*
     Создайте и опишите рекурсивную функцию showChildNodes(node, doc), 
      которая отрисовывает дочерние узлы текущего узла.
      Функция должна принимать два аргумента:
        - node: текущий узел
        - doc: ссылку на объект Document нового окна, в который производится вывод
      1. Проверьте тип текущего узла
        1.1 Если это текстовый узел - отрисуйте его содержание
        1.2 Если это узел-элемент - выведите его название и ...
          вызовите эту функцию для каждого из дочерних узлов  
    */
    
    
  </script>
</head>

<body>
  <h1>Структура DOM</h1>
  <div>
    <h2>Вывод структуры DOM</h2>
    <p>Этот код открывает новое окно и <span>выводит</span> в него структуру текущего документа</p>
  </div>
  <div>
    <h2>Запуск кода</h2>
    <p>Для запуска кода щелкните <a href="javascript:showDOM()">здесь</a>
    </p>
  </div>
 <form action="http://google.ru/search" target="_blank" name="search">
    <textarea name="ta"></textarea>
    <fieldset>
      <legend>Я ищу</legend>
      <div class="block">
        <label><span>Слово</span>
          <input type="text" name="q" value="Уарабей">
        </label>
      </div>
    </fieldset>
    <div class="block">
      <button><a href="javascript:f()">Кликнуть</a></button>
      <button><a href="javascript:demo()">Сбросить</a></button>
      <button><a href="javascript:s()">Отправить</a></button>
      <button type="submit">Submit</button>
    </div>
  </form>
</body>
</html>
